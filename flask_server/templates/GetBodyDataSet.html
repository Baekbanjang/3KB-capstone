<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Body Movement DataSet Test</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <button class="PresetButton" value=1>1</button>
    <button class="PresetButton" value=2>2</button>
    <button class="PresetButton" value=3>3</button>
    <button class="PresetButton" value=4>4</button>
    <table>
        <tr>
            <td>도</td>
            <td>
                <button class="LiveButton" value="0">녹화하기</button>
                <button class="DeleteButton" value="0">삭제하기</button>
            </td>
            <td>
                <div id="myDiv0" style="display: none;">
                    <img id="video_pose0" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
        <tr>
            <td>레</td>
            <td>
                <button class="LiveButton" value="1">녹화하기</button>
                <button class="DeleteButton" value="1">삭제하기</button>
            </td>
            <td>
                <div id="myDiv1" style="display: none;">
                    <img id="video_pose1" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
        <tr>
            <td>미</td>
            <td>
                <button class="LiveButton" value="2">녹화하기</button>
                <button class="DeleteButton" value="2">삭제하기</button>
            </td>
            <td>
                <div id="myDiv2" style="display: none;">
                    <img id="video_pose2" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
        <tr>
            <td>파</td>
            <td>
                <button class="LiveButton" value="3">녹화하기</button>
                <button class="DeleteButton" value="3">삭제하기</button>
            </td>
            <td>
                <div id="myDiv3" style="display: none;">
                    <img id="video_pose3" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
        <tr>
            <td>솔</td>
            <td>
                <button class="LiveButton" value="4">녹화하기</button>
                <button class="DeleteButton" value="4">삭제하기</button>
            </td>
            <td>
                <div id="myDiv4" style="display: none;">
                    <img id="video_pose4" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
        <tr>
            <td>라</td>
            <td>
                <button class="LiveButton" value="5">녹화하기</button>
                <button class="DeleteButton" value="5">삭제하기</button>
            </td>
            <td>
                <div id="myDiv5" style="display: none;">
                    <img id="video_gesture5" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
        <tr>
            <td>시</td>
            <td>
                <button class="LiveButton" value="6">녹화하기</button>
                <button class="DeleteButton" value="6">삭제하기</button>
            </td>
            <td>
                <div id="myDiv6" style="display: none;">
                    <img id="video_gesture6" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
        <tr>
            <td>정지 신호</td>
            <td>
                <button class="LiveButton" value="7">녹화하기</button>
                <button class="DeleteButton" value="7">삭제하기</button>
            </td>
            <td>
                <div id="myDiv7" style="display: none;">
                    <img id="video_gesture7" src="" /> <br>
                    <button class="stopButton" value="True">녹화 중지하기</button>
                </div>
            </td>
        </tr>
    </table>

    <script>
        // Ajax를 사용하여 Flask로 데이터를 비동기적으로 전송하는 함수
        $(document).ready(function() {
            $('.PresetButton').click(function() {
                var buttonValue = $(this).val();
                console.log("버튼 값:", buttonValue);
                $.ajax({
                    url: "/HandGestures_play",
                    type: "POST",
                    data: {preset: buttonValue},
                    success: function(response) {
                        console.log("성공:", response);
                    },
                    error: function(error) {
                        console.log("오류:", error);
                    }
                });
            });
            $('.LiveButton').click(function() {
                var buttonValue = $(this).val();
                console.log("버튼 값:", buttonValue);
                $.ajax({
                    url: "/Get_BodyMovements",
                    type: "POST",
                    data: {button_value: buttonValue},
                    success: function(response) {
                        console.log("성공:", response);
                        toggleDivVisibility(buttonValue);
                    },
                    error: function(error) {
                        console.log("오류:", error);
                    }
                });
            });
            $('.DeleteButton').click(function() {
                var buttonValue = $(this).val();
                $.ajax({
                    url: "/Get_BodyMovements",
                    type: "POST",
                    data: {delete_button_value: buttonValue},
                    success: function(response) {
                        console.log("성공:", response);
                    },
                    error: function(error) {
                        console.log("오류:", error);
                    }
                });
            });
            $('.stopButton').click(function() {
                var stopSign = $(this).val();
                $.ajax({
                    url: "/Get_BodyMovements",
                    type: "POST",
                    data: {stop_sign: stopSign},
                    success: function(response) {
                        console.log("성공:", response);
                        divClear();
                    },
                    error: function(error) {
                        console.log("오류:", error);
                    }
                });
            });
        });

        function toggleDivVisibility(buttonValue) {
            // 모든 버튼의 영상을 숨깁니다.
            $('[id^="video_pose"]').attr('src', '');

            // 현재 클릭한 버튼에 해당하는 영상만 보여줍니다.
            $('#video_pose' + buttonValue).attr('src', "/get_video_pose");

            // 모든 버튼 영역을 숨깁니다.
            $('[id^="myDiv"]').hide();
                            
            // 현재 클릭한 버튼에 해당하는 영역만 보여줍니다.
            $('#myDiv' + buttonValue).show();
        }

        function divClear() {
            // 모든 버튼의 영상을 숨깁니다.
            $('[id^="video_pose"]').attr('src', '');

            // 모든 버튼 영역을 숨깁니다.
            $('[id^="myDiv"]').hide();
        }
    </script>
</body>
</html>
